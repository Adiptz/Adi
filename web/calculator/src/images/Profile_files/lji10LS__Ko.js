if (self.CavalryLogger) { CavalryLogger.start_js(["\/ybjq"]); }

__d("CometUFICommentListRenderer_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"canShowSeenState"}],kind:"Fragment",metadata:null,name:"CometUFICommentListRenderer_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFICommentList_feedback"},{args:null,kind:"FragmentSpread",name:"CometUFITopLevelCommentListRenderer_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFITopLevelCommentListRenderer_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedbackSource"}],kind:"Fragment",metadata:null,name:"CometUFITopLevelCommentListRenderer_feedback",selections:[{alias:null,args:[{kind:"Variable",name:"feedback_source",variableName:"feedbackSource"}],concreteType:null,kind:"LinkedField",name:"top_level_comment_list_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometMediaViewerUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"MediaViewerTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometFeedUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"FeedTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometWatchUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"WatchTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"LiveProducerTopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"LiveProducerTopLevelCommentListRenderer",abstractKey:null}],storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeBlueDesignFeedUnitUFI_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedLocation"}],kind:"Fragment",metadata:null,name:"CometVideoHomeBlueDesignFeedUnitUFI_story",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shareable",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoHomeFeedUnitUFIImpl_shareable"}],storageKey:null},{alias:null,args:[{fields:[{kind:"Variable",name:"fb_feed_location",variableName:"feedLocation"}],kind:"ObjectValue",name:"feed_rendering_context"}],concreteType:"FeedbackContext",kind:"LinkedField",name:"feedback_context",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback_target_with_context",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoHomeFeedUnitUFIImpl_feedback"}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeFeedStoryUFIReactionsCount_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},c=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}];return{argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedStoryUFIReactionsCount_feedback",selections:[a,{alias:"i18n_reaction_count",args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"ImportantReactorsConnection",kind:"LinkedField",name:"important_reactors",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[b],storageKey:null}],storageKey:"important_reactors(first:2)"},{alias:"reaction_count",args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[a,b],storageKey:null},{alias:null,args:c,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Feedback",abstractKey:null}}();e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFIImpl_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedbackSource"},{kind:"RootArgument",name:"removeRealtimeUFI"}],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedUnitUFIImpl_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometVideoHomeFeedUnitUFISummaryAndActions_feedback"},{args:null,kind:"FragmentSpread",name:"CometUFICommentListRenderer_feedback"},{condition:"removeRealtimeUFI",kind:"Condition",passingValue:!1,selections:[{alias:null,args:[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}],kind:"ScalarField",name:"is_eligible_for_real_time_updates",storageKey:null}]}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFIImpl_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedUnitUFIImpl_shareable",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometVideoHomeFeedUnitUFISummaryAndActions_shareable"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFISummaryAndActions_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}];return{argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"canShowSeenState"},{defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},{kind:"RootArgument",name:"shareSheetRedesign"},{kind:"RootArgument",name:"useBlueDesign"},{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedUnitUFISummaryAndActions_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:a,kind:"ScalarField",name:"can_viewer_comment",storageKey:null},{alias:null,args:a,kind:"ScalarField",name:"can_viewer_react",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_see_voice_switcher",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},{args:[{kind:"Variable",name:"canShowSeenState",variableName:"canShowSeenState"}],kind:"FragmentSpread",name:"CometVideoHomeFeedUnitUFISummary_feedback"},{condition:"useBlueDesign",kind:"Condition",passingValue:!1,selections:[{args:[{kind:"Variable",name:"focusCommentID",variableName:"focusCommentID"}],kind:"FragmentSpread",name:"CometUFIActorSelector_feedback"}]},{args:null,kind:"FragmentSpread",name:"UFI2ReactionActionLink_feedback"},{condition:"shareSheetRedesign",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometUFINewShareActionLink_feedback"}]},{condition:"shareSheetRedesign",kind:"Condition",passingValue:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometUFIShareActionLink_feedback"}]}],type:"Feedback",abstractKey:null}}();e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFISummaryAndActions_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"shareSheetRedesign"}],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedUnitUFISummaryAndActions_shareable",selections:[{condition:"shareSheetRedesign",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometUFINewShareActionLink_shareable"}]},{condition:"shareSheetRedesign",kind:"Condition",passingValue:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometUFIShareActionLink_shareable"}]}],type:"Entity",abstractKey:"__isEntity"};e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFISummary_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"canShowSeenState"},{kind:"RootArgument",name:"useBlueDesign"}],kind:"Fragment",metadata:null,name:"CometVideoHomeFeedUnitUFISummary_feedback",selections:[{alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:a,storageKey:null},{alias:"reaction_count",args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:a,storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFICommentsCount_feedback"},{condition:"useBlueDesign",kind:"Condition",passingValue:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometUFIReactionsCount_feedback"}]},{condition:"useBlueDesign",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoHomeFeedStoryUFIReactionsCount_feedback"}]},{args:null,kind:"FragmentSpread",name:"CometUFITopReactions_feedback"}],type:"Feedback",abstractKey:null}}();e.exports=a}),null);
__d("CometLazyTooltip.react",["BaseTooltip.react","CometTooltipImpl.react","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useMemo;function a(a){var c=a.delayContentMs;c=c===void 0?0:c;var d=a.delayTooltipMs;d=d===void 0?300:d;var e=a.onVisibilityChange,f=a.tooltipProps,j=a.tooltipResource;a=babelHelpers.objectWithoutPropertiesLoose(a,["delayContentMs","delayTooltipMs","onVisibilityChange","tooltipProps","tooltipResource"]);var k=h(function(a){a&&j.preload(),e&&e(a)},[e,j]),l=i(function(){return b("lazyLoadComponent")(j)},[j]);return g.jsx(b("BaseTooltip.react"),babelHelpers["extends"]({delayContentMs:c,delayTooltipMs:d,onVisibilityChange:k,tooltip:g.jsx(l,babelHelpers["extends"]({},f)),tooltipImpl:b("CometTooltipImpl.react")},a))}e.exports=a}),null);
__d("useCometTrackingCodeForMutationProperties",["CometRouteURL","CometTrackingCodeContext","React","getReferrerURI"],(function(a,b,c,d,e,f){"use strict";var g=b("CometRouteURL").useRouteURLParams;c=b("React");var h=c.useContext,i=c.useMemo;function a(){var a=g(),c=b("getReferrerURI")(),d=c?c.getPath():void 0,e=h(b("CometTrackingCodeContext")),f=a.notif_id,j=a.notif_t;c=i(function(){var a=null;f!=null&&(a=JSON.stringify({alert_id:f,notif_source:"notif_tab",notif_type:j}));a=a!=null?[a].concat(e.encrypted_tracking):e.encrypted_tracking;return{feedback_referrer:d,is_tracking_encrypted:!0,tracking:a}},[d,f,j,e]);return c}e.exports=a}),null);
__d("CometUFICommentListState",["CometUFICommentListStateConfig","ErrorNormalizeUtils","FBLogger","UFI2ViewOption","gkx","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function h(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function i(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function j(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function k(a,c){var d=l(a,c);if(a.__type!=="INITIAL_STATE"&&c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");return d}function l(a,c){if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,k=e.beforeCount,l=e.canViewerComment,m=e.commentIDs,o=e.commentsByID,q=e.feedbackTargetID,u=e.hasNext,v=e.hasPrevious,w=e.hiddenCommentIDs,x=e.initiallyExpanded,y=e.isListVisible,z=e.pageSize,A=e.shouldRenderComposerPreemptively,B=e.topLevelFeedbackTargetID,C=e.totalCount;e=e.viewOption;d={backward:g({count:k,direction:"backward",error:null,hasMore:v,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C}),forward:g({count:f,direction:"forward",error:null,hasMore:u,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C})};var ea={};w.forEach(function(a){ea[a]="COLLAPSED"});w={canViewerComment:l,commentPages:m.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:k,commentIDs:m,hasNext:u,hasPrevious:v,state:"VISIBLE"}]:[],commentsByID:o,commentsHiddenByViewer:ea,expanded:(z=c==null?void 0:c.expanded)!=null?z:x,feedbackTargetID:q,hasPaged:{backward:!1,forward:!1},isListVisible:y,locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:A,topLevelFeedbackTargetID:B,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},w,{__type:"DEPTH_0",status:{error:null,pending:!1}});l=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},w,{__type:"DEPTH_1",repliesCollapser:h({count:m.length,expanded:x,minCountToShowCollapser:l}),repliesExpander:i({error:null,expanded:(k=c==null?void 0:c.expanded)!=null?k:x,isLoading:(o=(u=f)==null?void 0:(v=u.status)==null?void 0:v.pending)!=null?o:!1,totalCount:C})})}if(c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");switch(a.__type){case"COLLAPSE_LIST":z=a.args;q=z.depth;y=z.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});d=t.getCommentsCount({depth:q,state:c})===0;A=y>0&&d===!0;A&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:i({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:y})});case"DELETE_COMMENT":B=a.args;var D=B.commentID;e=B.depth;w=c.commentPages;m=c.locallyComposedCommentIDs;var E=c.newCommentsPage;if(w.length===0&&E.commentIDs.length===0)return c;l=E.commentIDs.filter(function(a){return a!==D});k=t.getVisibleCommentsCount({depth:e,state:c});x=l.length<E.commentIDs.length;if(x){var fa={};l.forEach(function(a){fa[a]=E.visibleStates[a]});f=babelHelpers["extends"]({},E,{commentIDs:l,visibleStates:fa});u=w.map(function(a){return j({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,newCommentsPage:f});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,newCommentsPage:f,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:v})})}var F=null,G=!1;o=w.map(function(a,b){if(G)return j({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==D});if(c.length<a.commentIDs.length){G=!0;F=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&F!=null&&b<F?j({direction:"forward",page:a}):a}).filter(Boolean);if(G===!1){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried deleting a comment that isnt present");return c}C=m.filter(function(a){return a!==D});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:o,locallyComposedCommentIDs:C});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:o,locallyComposedCommentIDs:C,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":z=a.args.commentIDs;var ga=c.commentsHiddenByViewer,H=babelHelpers["extends"]({},ga);z.forEach(function(a){var c=ga[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(H[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:H}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:H});case"EXPAND_LIST":q=a.args;d=q.depth;A=q.totalCount;y=c.commentPages;B=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(d!==0&&t.isRepliesExpanderLoading({depth:d,state:c}))return c;if(A===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});e=t.getVisibleCommentsCount({depth:d,state:c});if(e===0){x=t.getCommentsCount({depth:d,state:c})===0;if(x)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:i({error:null,expanded:!1,isLoading:!0,totalCount:A})});l=y.length>0?y[0]:null;u=l!=null?[babelHelpers["extends"]({},l,{state:"VISIBLE"})].concat(y.slice(1)):y;var ha={};B.commentIDs.forEach(function(a){ha[a]="VISIBLE"});f=babelHelpers["extends"]({},B,{visibleStates:ha});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,expanded:!0,newCommentsPage:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=(l!=null?l.commentIDs.length:0)+B.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,expanded:!0,newCommentsPage:f,repliesCollapser:h({count:v,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:h({count:e,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"HIDE_COMMENTS":w=a.args.commentIDs;m=c.commentsHiddenByViewer;var I=babelHelpers["extends"]({},m);w.forEach(function(a){I[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:I}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:I});case"RECEIVE_COMMENTS_PAGE":o=c.commentPages;C=c.locallyComposedCommentIDs;var J=c.newCommentsPage;k=c.pagers;z=a.args;var K=z.commentIDs;q=z.depth;d=z.direction;x=z.feedbackTargetID;A=z.hiddenCommentIDs;y=z.pageSize;var L=t.isPagerLoading({depth:q,direction:d,state:c})===!0;l=q!==0&&t.isRepliesExpanderLoading({depth:q,state:c});var ia=q===0&&!L;B=J.commentIDs.filter(function(a){return!(K.includes(a)&&(!ia||J.visibleStates[a]==="HIDDEN"))});u=C.filter(function(a){return!K.includes(a)});var M={};B.forEach(function(a){M[a]=J.visibleStates[a]});f=babelHelpers["extends"]({},J,{commentIDs:B,visibleStates:M});var ja=new Set(o.reduce(function(a,b){return a.concat(b.commentIDs)},[]).concat(ia?B:[]));v=K.filter(function(a){return!ja.has(a)});d==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");e=c.shouldComposerRenderWhenListIsExpanded===!0||L===!0||l===!0;var N=babelHelpers["extends"]({},c.commentsHiddenByViewer);A.forEach(function(a){Object.prototype.hasOwnProperty.call(N,a)||(N[a]="COLLAPSED")});m=ja.size;if(q!==0&&a.args.direction==="forward"&&m===0){w=a.args;z=w.afterCount;C=w.hasNext;d={backward:null,forward:g({count:z,direction:"forward",error:null,hasMore:C,isLoading:!1,pageSize:y})};var O=c.expanded||l?"VISIBLE":"HIDDEN";x={__type:"COMMENTS_PAGE",afterCount:z,beforeCount:B.length,commentIDs:v,hasNext:C,hasPrevious:!1,state:O};B.forEach(function(a){M[a]=O});f=babelHelpers["extends"]({},J,{commentIDs:B,visibleStates:M});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");if(c.__type!=="DEPTH_1")throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[x],commentsHiddenByViewer:N,expanded:O==="VISIBLE",locallyComposedCommentIDs:u,newCommentsPage:f,pagers:d,repliesCollapser:h({count:v.length,expanded:l,minCountToShowCollapser:A}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}m=o[0];w=o[o.length-1];z=t.getVisibleCommentsCount({depth:q,state:c});if(a.args.direction==="backward"){if(L&&m!=null&&m.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected first available page to be visible if backward pager was loading when backward comments were received","ufi2");C=a.args;x=C.beforeCount;d=C.hasPrevious;A=x<=B.length;A&&(M={},f.commentIDs.forEach(function(a){M[a]=L?"VISIBLE":"HIDDEN"}),f=babelHelpers["extends"]({},f,{visibleStates:M}));q=x-f.commentIDs.length-u.length;C=babelHelpers["extends"]({},k,{backward:L?g({count:q,direction:"backward",error:null,hasMore:d&&!A,isLoading:!1,pageSize:y}):k.backward});m={__type:"COMMENTS_PAGE",afterCount:((B=m==null?void 0:m.afterCount)!=null?B:0)+((B=m==null?void 0:(q=m.commentIDs)==null?void 0:q.length)!=null?B:0),beforeCount:x,commentIDs:v,hasNext:!0,hasPrevious:d,state:L||l?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[m].concat(o),commentsHiddenByViewer:N,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");q=a.args.minCountToShowCollapser;B=l?!0:c.expanded;x=z+(m.state==="VISIBLE"?v.length:0)+(A&&L?f.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[m].concat(o),commentsHiddenByViewer:N,expanded:B,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,repliesCollapser:h({count:x,expanded:B,minCountToShowCollapser:q}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}if(L&&w!=null&&w.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected last available page to be visible if forward pager was loading when forward comments were received","ufi2");d=a.args;A=d.afterCount;m=d.hasNext;C=babelHelpers["extends"]({},k,{forward:L?g({count:A,direction:"forward",error:null,hasMore:m,isLoading:!1,pageSize:y}):k.forward});d={__type:"COMMENTS_PAGE",afterCount:A,beforeCount:((x=w==null?void 0:w.beforeCount)!=null?x:0)+((q=w==null?void 0:(B=w.commentIDs)==null?void 0:B.length)!=null?q:0),commentIDs:v,hasNext:m,hasPrevious:!0,state:L||l?"VISIBLE":"HIDDEN"};var P=0;y=l?o.map(function(a){a.state==="HIDDEN"&&(P+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):o;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(y,[d]),commentsHiddenByViewer:N,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");k=a.args.minCountToShowCollapser;A=d.state==="VISIBLE"?z+P+v.length:z+P;x=l?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(y,[d]),commentsHiddenByViewer:N,expanded:x,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,repliesCollapser:h({count:A,expanded:x,minCountToShowCollapser:k}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e});case"RECEIVE_NEW_COMMENT":w=a.args;var Q=w.commentID;B=w.depth;q=w.pageSize;m=w.prevTotalCount;o=w.totalCount;v=c.commentPages;z=c.commentsByID;y=c.expanded;d=c.locallyComposedCommentIDs;var R=c.newCommentsPage;u=c.pagers;f=c.viewOption;C=t.getCommentsCount({depth:B,state:c})===0;A=Object.prototype.hasOwnProperty.call(R.visibleStates,Q)||v.some(function(a){return a.commentIDs.includes(Q)});if(A)return c;x=z[Q]!=null&&z[Q].is_locally_composed===!0;var S=!b("UFI2ViewOption").isChronologicalOrder(f)&&c.__type!=="DEPTH_0";k=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,o)}):null;if(v.length===0){e=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(l={},l[Q]=y||x||B!==0&&C&&m===0?"VISIBLE":"HIDDEN",l))});w=x?[Q].concat(d):d;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:w,newCommentsPage:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;z=C&&m===0?!0:y;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:z,locallyComposedCommentIDs:w,newCommentsPage:e,repliesCollapser:h({count:e.commentIDs.length,expanded:y,minCountToShowCollapser:A}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}f=v[0];l=p(c);C=B===0&&t.hasMoreInDirection({depth:B,direction:"forward",state:c,totalCount:o})&&!c.commentPages.some(function(a){return a.state==="VISIBLE"});if(!C&&x){var T=!1,U=babelHelpers["extends"]({},R.visibleStates),ka=[],V=[];z=(S?[].concat(v).reverse():v).map(function(a){if(!T&&a.state==="VISIBLE"){T=!0;R.commentIDs.forEach(function(a){U[a]==="VISIBLE"&&!s(c)?(delete U[a],V.push(a)):ka.push(a)});return babelHelpers["extends"]({},a,{commentIDs:S?[].concat(a.commentIDs,V.reverse(),[Q]):[Q].concat(V,a.commentIDs)})}return T?babelHelpers["extends"]({},a,{afterCount:S?a.afterCount+1+V.length:a.afterCount,beforeCount:S?a.beforeCount:a.beforeCount+1+V.length}):a});w=babelHelpers["extends"]({},R,{commentIDs:ka,visibleStates:U});e=[Q].concat(d);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:z,locallyComposedCommentIDs:e,newCommentsPage:w});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;var W=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:S?z.reverse():z,locallyComposedCommentIDs:e,newCommentsPage:w,repliesCollapser:h({count:W+1,expanded:y,minCountToShowCollapser:A}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(C){e={commentPages:v.map(function(a,b){return b===0?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0}):a}),locallyComposedCommentIDs:x?[Q].concat(d):d,newCommentsPage:babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(z={},z[Q]="VISIBLE",z))})};return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,e,{__type:"DEPTH_0"}):babelHelpers["extends"]({},c,e,{__type:"DEPTH_1"})}else if(l&&aa(c)){w=v.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});A=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(W={},W[Q]="VISIBLE",W))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:w,newCommentsPage:A});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");C=a.args.minCountToShowCollapser;x=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:w,newCommentsPage:A,repliesCollapser:h({count:x+1,expanded:y,minCountToShowCollapser:C}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(l&&R.commentIDs.length===0){d=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:Math.min(u.backward.count+1,q)})}):u;z=f.commentIDs.length<q;if(z){e=[babelHelpers["extends"]({},f,{commentIDs:[Q].concat(f.commentIDs)})].concat(v.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:e,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:e,pagers:d,repliesExpander:k})}W=[{__type:"COMMENTS_PAGE",afterCount:f.afterCount+f.commentIDs.length,beforeCount:0,commentIDs:[Q],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},f,{beforeCount:1,hasPrevious:!0})].concat(v.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:W,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:W,pagers:d,repliesExpander:k})}else{B=o<=m;w=B?v:v.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});A=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:B?u.backward.count:Math.min(u.backward.count+1,q)})}):u;y=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(x={},x[Q]="HIDDEN",x))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:w,newCommentsPage:y,pagers:A}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:w,newCommentsPage:y,pagers:A,repliesExpander:k})}case"RECEIVE_REALTIME_COMMENT":var X=a.args.commentID;C=Object.prototype.hasOwnProperty.call(c.newCommentsPage.visibleStates,X)||c.commentPages.some(function(a){return a.commentIDs.includes(X)});l=s(c);if(!b("UFI2ViewOption").isChronologicalOrder(c.viewOption)&&!l){b("recoverableViolation")("Unable to receive realtime comment for non chronological ordering mode "+((z=c.viewOption)!=null?z:"(null ordering mode)"),"ufi2");return c}if(C)return c;e=t.getCommentsCount({depth:a.args.depth,state:c})===0;f=r(c).length===0;W=!a.args.hideCommentInPager&&e&&c.__type==="DEPTH_1";d=f&&!c.expanded;o=a.args.hideCommentInPager||!c.expanded&&!W||!e&&!aa(c)||l&&!e&&!ca(c);m=!d&&o===!0&&!(f&&c.pagers.forward!=null)&&!l;v=!d&&o&&!m;var la=l;x={canViewerComment:c.canViewerComment,commentPages:c.commentPages.map(function(a){return la?babelHelpers["extends"]({},a,{afterCount:a.afterCount+1,hasNext:!0}):babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})}),commentsByID:c.commentsByID,commentsHiddenByViewer:c.commentsHiddenByViewer,expanded:c.expanded||W,feedbackTargetID:c.feedbackTargetID,hasPaged:c.hasPaged,locallyComposedCommentIDs:c.locallyComposedCommentIDs,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:la?[].concat(c.newCommentsPage.commentIDs,[X]):[X].concat(c.newCommentsPage.commentIDs),visibleStates:babelHelpers["extends"]({},c.newCommentsPage.visibleStates,(B={},B[X]=o?"HIDDEN":"VISIBLE",B))}),pagers:o?{backward:m?{__type:"PAGER",count:((x=(q=c.pagers)==null?void 0:(u=q.backward)==null?void 0:u.count)!=null?x:0)+1,direction:"backward",status:{error:(A=(w=c.pagers)==null?void 0:(y=w.backward)==null?void 0:y.status.error)!=null?A:null,pending:(C=(k=c.pagers)==null?void 0:(z=k.backward)==null?void 0:z.status.pending)!=null?C:!1}}:c.pagers.backward,forward:v?{__type:"PAGER",count:((d=(e=c.pagers)==null?void 0:(f=e.forward)==null?void 0:f.count)!=null?d:0)+1,direction:"forward",status:{error:(B=(l=c.pagers)==null?void 0:(W=l.forward)==null?void 0:W.status.error)!=null?B:null,pending:(u=(m=c.pagers)==null?void 0:(q=m.forward)==null?void 0:q.status.pending)!=null?u:!1}}:c.pagers.forward}:c.pagers,shouldComposerRenderWhenListIsExpanded:c.shouldComposerRenderWhenListIsExpanded,topLevelFeedbackTargetID:c.topLevelFeedbackTargetID,viewOption:c.viewOption};if(c.__type==="DEPTH_1"){return babelHelpers["extends"]({},c,x,{repliesCollapser:h({count:t.getVisibleCommentsCount({depth:a.args.depth,state:c})+(o?0:1),expanded:c.expanded,minCountToShowCollapser:b("CometUFICommentListStateConfig").MIN_REPLIES_TO_SHOW_COLLAPSER}),repliesExpander:i({error:(A=(w=c.repliesExpander)==null?void 0:(y=w.status)==null?void 0:y.error)!=null?A:null,expanded:c.expanded,isLoading:(C=(k=c.repliesExpander)==null?void 0:(z=k.status)==null?void 0:z.pending)!=null?C:!1,totalCount:a.args.totalCount})})}return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,x):c;case"RECEIVE_REFETCH_LIST":v=a.args.depth;e=c.feedbackTargetID;f=c.topLevelFeedbackTargetID;d=c.viewOption;if(v!==0)throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(!t.isListLoading({depth:v,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");l=n.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:e,initiallyExpanded:!0,topLevelFeedbackTargetID:f,viewOption:d}),state:null});if(l.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");return babelHelpers["extends"]({},l,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":W=a.args;B=W.depth;m=W.direction;q=W.pageSize;u=c.commentPages;o=c.expanded;w=c.newCommentsPage;y=c.pagers;if(!o)throw b("unrecoverableViolation")("Expected list to be expanded","ufi2");if(t.isPagerLoading({depth:B,direction:m,state:c}))throw b("unrecoverableViolation")("Cant request page if pager is loading","ufi2");if(B===0&&t.isListLoading({depth:B,state:c}))throw b("unrecoverableViolation")("Cant request page if list is loading","ufi2");if(B!==0&&t.isRepliesExpanderLoading({depth:B,state:c}))throw b("unrecoverableViolation")("Cant request page if replies expander is loading","ufi2");if(m==="backward"){A=u.findIndex(function(a){return a.state==="VISIBLE"});k=-1;if(A>-1){z=u[A];z.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("CometUFICommentList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);if(z.hasPrevious!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");k=A-1}else A===-1&&u.length>0&&(k=0);C=u[k];x=p(c)&&da(c,"HIDDEN");if(C&&C.state==="HIDDEN"){v=[].concat(u);v[k]=babelHelpers["extends"]({},C,{state:"VISIBLE"});e=babelHelpers["extends"]({},y,{backward:g({count:C.beforeCount,direction:"backward",error:null,hasMore:C.hasPrevious,isLoading:!1,pageSize:q})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:v,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:e,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");f=a.args.minCountToShowCollapser;d=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:v,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:e,repliesCollapser:h({count:d+C.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:f}),shouldComposerRenderWhenListIsExpanded:!0})}else if(x){var ma={};w.commentIDs.forEach(function(a){ma[a]="VISIBLE"});l=babelHelpers["extends"]({},w,{visibleStates:ma});W=babelHelpers["extends"]({},y,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:l,pagers:W,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");o=a.args.minCountToShowCollapser;m=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:l,pagers:W,repliesCollapser:h({count:m+l.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:o}),shouldComposerRenderWhenListIsExpanded:!0})}else{z=babelHelpers["extends"]({},y,{backward:babelHelpers["extends"]({},y.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:z}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:z})}}A=[].concat(u).reverse().findIndex(function(a){return a.state==="VISIBLE"});k=-1;if(A>-1){v=u.length-1-A;e=u[v];if(e.hasNext!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");k=v+1}else A===-1&&u.length>0&&(k=u.length-1);d=u[k];if(d&&d.state==="HIDDEN"){C=[].concat(u);C[k]=babelHelpers["extends"]({},d,{state:"VISIBLE"});f=babelHelpers["extends"]({},y,{forward:g({count:d.afterCount,direction:"forward",error:null,hasMore:d.hasNext,isLoading:!1,pageSize:q})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:C,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");x=a.args.minCountToShowCollapser;W=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:C,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:f,repliesCollapser:h({count:W+d.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:x}),shouldComposerRenderWhenListIsExpanded:!0})}else if(s(c)&&ba(c)&&da(c,"HIDDEN")&&c.__type==="DEPTH_0"){var na={};w.commentIDs.forEach(function(a){na[a]="VISIBLE"});return babelHelpers["extends"]({},c,{hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),newCommentsPage:babelHelpers["extends"]({},w,{visibleStates:na}),pagers:babelHelpers["extends"]({},y,{forward:null}),shouldComposerRenderWhenListIsExpanded:!0})}else{m=babelHelpers["extends"]({},y,{forward:babelHelpers["extends"]({},y.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:m}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:m})}case"REQUEST_REFETCH_LIST":l=a.args.depth;if(l!==0||c.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(t.isListLoading({depth:l,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":o=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:o}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:o});case"SET_COMMENTS_BY_ID":z=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:z}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:z});case"SET_SERVER_COMMENT_ID":e=a.args;var Y=e.clientCommentID,Z=e.serverCommentID;v=c.commentPages;A=c.locallyComposedCommentIDs;u=c.newCommentsPage;k=u.commentIDs.indexOf(Y);q=k!==-1;B=v.some(function(a){return a.commentIDs.some(function(a){return a===Y})});if(!q&&!B)return c;C=u.commentIDs.some(function(a){return a===Z});f=v.filter(function(a){return a.state==="HIDDEN"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});W=v.filter(function(a){return a.state==="VISIBLE"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});d=c;if(f){x=v.map(function(a){var b=a.commentIDs.indexOf(Z);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",commentPages:x}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",commentPages:x})}if(C){w=A.filter(function(a){return a===Y});y=u.commentIDs.filter(function(a){return a!==Y});m=babelHelpers["extends"]({},u.visibleStates);delete m[Y];l=babelHelpers["extends"]({},u,{commentIDs:y,visibleStates:m});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",locallyComposedCommentIDs:w,newCommentsPage:l}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",locallyComposedCommentIDs:w,newCommentsPage:l})}if(q){o=babelHelpers["extends"]({},u.visibleStates);if(W||C){z=u.commentIDs.filter(function(a){return a!==Y});delete o[Y];e=babelHelpers["extends"]({},u,{commentIDs:z,visibleStates:o});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",newCommentsPage:e}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",newCommentsPage:e})}else{k=u.commentIDs.map(function(a){return a===Y?Z:a});o[Z]=o[Y];delete o[Y];f=babelHelpers["extends"]({},u,{commentIDs:k,visibleStates:o});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",newCommentsPage:f}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",newCommentsPage:f})}}if(B)if(W||C){x=v.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",commentPages:x}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",commentPages:x})}else{y=v.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),[Z],a.commentIDs.slice(b+1))})});d.__type==="DEPTH_0"?d=babelHelpers["extends"]({},d,{__type:"DEPTH_0",commentPages:y}):d=babelHelpers["extends"]({},d,{__type:"DEPTH_1",commentPages:y})}m=A.map(function(a){return a===Y?Z:a});return d.__type==="DEPTH_0"?babelHelpers["extends"]({},d,{__type:"DEPTH_0",locallyComposedCommentIDs:m}):babelHelpers["extends"]({},d,{__type:"DEPTH_1",locallyComposedCommentIDs:m});case"UNHIDE_COMMENTS":w=a.args.commentIDs;l=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},l);w.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw b("unrecoverableViolation")("CometUFICommentListState: Invalid action type: "+a.__type,"ufi2")}}function m(a,c){try{var d=k(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("CometUFICommentListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return k(a,b)}function c(a,b){return k(a,b)}var n={collapseList:function(a){var b=a.args;a=a.state;return m({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return m({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_LIST",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return m({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return m({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRealtimeComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REALTIME_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return m({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return m({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return m({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return m({__type:"UNHIDE_COMMENTS",args:b},a)}};function o(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function p(a){var b=a.commentPages,c=a.newCommentsPage;b=b[0];if(!b)return c.commentIDs.length>0;return s(a)?b.beforeCount===0:b.beforeCount-c.commentIDs.length===0}function aa(a){var b=a.commentPages[0];b=(b==null||b.state==="VISIBLE")&&p(a);return b&&(s(a)||q(a,"VISIBLE"))}function ba(a){var b=a.commentPages,c=a.newCommentsPage;b=[].concat(b).reverse()[0];if(!b)return c.commentIDs.length>0;return s(a)?b.afterCount-c.commentIDs.length===0:b.afterCount===0}function ca(a){var b=a.commentPages;b=[].concat(b).reverse()[0];b=(b==null||b.state==="VISIBLE")&&ba(a);return b&&(!s(a)||q(a,"VISIBLE"))}function da(a,b){var c=a.newCommentsPage;return c.commentIDs.some(function(a){return c.visibleStates[a]===b})}function q(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function r(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage,f=a.viewOption;d=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);var g=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});if(s(a))return[].concat(d,g);return c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(f)?[].concat(d,g.reverse()):[].concat(g,d)}function s(a){return a.__type==="DEPTH_0"&&a.viewOption==="MOST_VOTED"&&b("gkx")("1445059")}var t={canFetchInDirection:function(a){var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=t.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&t.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&t.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=t.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&q(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){var c=a.depth,d=a.direction,e=a.pageSize;a=a.state;d=t.getPagerCount({depth:c,direction:d,state:a});if(d!=null)return d;if(c!==0){if(e==null)throw b("unrecoverableViolation")("CometUFICommentListState.getCountForFetch(...): Expected pageSize to compute fetch count for expanding replies","ufi2");d=t.getRepliesExpanderCount({depth:c,state:a});if(d!=null)return Math.min(d,e)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){a.depth;a=a.state;var c=a.commentsByID,d=a.locallyComposedCommentIDs,e=a.newCommentsPage,f=a.viewOption;a=r(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!d.length&&e.commentIDs.length>0&&b("UFI2ViewOption").isChronologicalOrder(f)?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return r(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=t.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return t.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return t.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=o({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=o({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return t.getVisibleComments({depth:b,state:a}).length>0},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null},pagerHasRealtimeComments:function(a){var b=a.direction;a=a.state;var c=Object.values(a.newCommentsPage.visibleStates).find(function(a){return a==="HIDDEN"})!=null;return b==="forward"?a.pagers.backward==null?c:!1:c}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:t,StateUpdaters:n}}),null);
__d("CometUFICommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){var c={};a=a?a.map(function(a){if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}if(a.id!=null){var d=a.id;c[d]=a;return d}else{b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0)return c;var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("CometUFITopLevelCommentListRenderer.react",["CometPlaceholder.react","CometRelay","React","CometUFITopLevelCommentListRenderer_feedback.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("CometRelay").useFragment,i=b("CometRelay").MatchContainer;b("CometRelay").graphql;var j=b("React");function a(a){var c=a.feedback;a=babelHelpers.objectWithoutPropertiesLoose(a,["feedback"]);c=h(g!==void 0?g:g=b("CometUFITopLevelCommentListRenderer_feedback.graphql"),c);c=c==null?void 0:c.top_level_comment_list_renderer;if(c==null)return null;var d=a.commentsListRenderProps,e=d.Selectors,f=d.depth;d=d.listState;return!e.isListExpanded({depth:f,state:d})?null:j.jsx(b("CometPlaceholder.react"),{"data-testid":void 0,fallback:null,children:j.jsx(i,{match:c,props:a})})}e.exports=a}),null);
__d("useCometUFICodedErrorDialog",["CometPlaceholder.react","JSResource","React","SilenceableErrorMessageUtils","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useState,j=b("SilenceableErrorMessageUtils").getMetadataFromError,k=b("SilenceableErrorMessageUtils").shouldHideErrorMessage,l=b("lazyLoadComponent")(b("JSResource")("CometUFICodedErrorDialog.react").__setRef("useCometUFICodedErrorDialog"));function a(){var a=i(null),c=a[0],d=a[1];a=h(function(a){a.code!=null&&d(a)},[d]);var e=h(function(){return d(null)},[d]);if(c==null)return{errorDialog:null,setError:a};var f=j(c);return{errorDialog:k(f)?null:g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(g.Fragment,{}),children:g.jsx(l,{error:c,onClose:e})}),setError:a}}e.exports=a}),null);
__d("useTrackingCodeFnForComet",["React","useCometTrackingCodeForMutationProperties"],(function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useCallback;c=function(){var a=b("useCometTrackingCodeForMutationProperties")(),c=g(function(){return a},[a]);return c};e.exports=c}),null);
__d("CometUFICommentListRenderer.react",["requireDeferred","CometRelay","CometUFICommentList.react","CometUFITopLevelCommentListRenderer.react","React","RelayUFI2CommentsKeyContext","UFI2RealtimeContainer.react","mergeRefs","recoverableViolation","useCometUFICodedErrorDialog","useTrackingCodeFnForComet","useTriggerAccessibilityAlert","CometUFICommentListRenderer_feedback.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("CometRelay").useRelayEnvironment,j=b("requireDeferred")("CometUFIFeedbackCommentReactSubscription"),k=b("requireDeferred")("CometUFIToggleCommentPermissionSubscription"),l=b("React");c=b("React");var m=c.useCallback,n=c.useContext,o=c.useMemo,p=c.useRef,q=c.useState,r=b("requireDeferred")("UFI2CreateCommentMutation");function a(a){var c=a.displayCommentsContext,d=a.fallback,e=a.feedback,f=a.feedbackSource,s=a.feedLocation,t=a.focusCommentID,u=a.listRef,v=a.storyRenderLocation,w=h(g!==void 0?g:g=b("CometUFICommentListRenderer_feedback.graphql"),e),x=p(null),y=i(),z=b("useTriggerAccessibilityAlert")();a=q(null);var A=a[0],B=a[1];e=q(null);var C=e[0],D=e[1];a=q(!1);var E=a[0],F=a[1];e=b("useCometUFICodedErrorDialog")();a=e.errorDialog;var G=e.setError,H=w==null?void 0:w.id,I=w==null?void 0:w.subscription_target_id;e=m(function(){if(H==null||I==null)return null;var a=!1,b=function(){},c={dispose:function(){a=!0,b()}};j.onReady(function(c){if(!a){c=c.subscribe(y,{top_level_feedback_id:H},!1,I,!0);b=c.dispose}});return c},[y,H,I]);var J=m(function(){return F(!0)},[]),K=m(function(){var a=x.current;if(a==null)return;a.Actions.expandList({focusComposer:!0,scrollToComposer:!0})},[]),L=m(function(){if(H==null||I==null)return;var a=!1,b=function(){},c={dispose:function(){a=!0,b()}};k.onReady(function(c){if(!a){c=c.subscribe(y,{feedback_id:H},!1,I);b=c.dispose}});return c},[y,H,I]),M=b("useTrackingCodeFnForComet")(),N=n(b("RelayUFI2CommentsKeyContext")),O=m(function(c){var d=c.actorID,e=c.clientID,f=c.commentData,g=c.entitiesByID,b=c.environment,a=c.feedbackSource,h=c.getTrackingDataFn,i=c.topLevelFeedbackID,j=c.updater,k=c.viewOption;if(!f)return;r.onReadyImmediately(function(c){c.commit({UFI2CommentsProvider_commentsKey:N,actorID:d,clientID:e,containerMapping:{containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1},entitiesByID:g,environment:b,feedLocation:s,feedbackSource:a,focusCommentID:t,input:babelHelpers["extends"]({},f,M(h)),isComet:!0,onError:G,topLevelFeedbackId:i,triggerAccessibilityAlert:z,updater:j,useDefaultActor:!1,viewOption:k})})},[s,t,N,G,M,z]),P=o(function(){return b("mergeRefs")(u,x)},[u]);if(H==null){b("recoverableViolation")("No id on feedback when fetching from relay story in CometUFICommentListRenderer, this indicates relays store/environment has been bonkered some how","ufi2");return null}return l.jsxs(b("UFI2RealtimeContainer.react"),{subscribe:e,children:[l.jsx(b("CometUFICommentList.react"),{depth:0,displayCommentsContext:c,fallback:d,feedLocation:s,feedback:w,feedbackSource:f,focusCommentID:t,listRef:P,useDefaultActor:!1,children:function(a){return l.jsx(b("UFI2RealtimeContainer.react"),{subscribe:L,children:l.jsx(b("CometUFITopLevelCommentListRenderer.react"),{commentsListRenderProps:a,displayCommentsContext:c,editingCommentID:A,feedLocation:s,feedback:w,feedbackSource:f,feedbackTargetID:H,focusCommentID:t,listRef:P,onAddCommentClick:K,onCommitCommentCreate:O,onEditCommentError:G,onTranslateAllClick:J,renderedTranslationCommentID:C,setEditingCommentID:B,setRenderedTranslationCommentID:D,shouldRequestTranslationForAllComments:E,storyRenderLocation:v})})}}),a]})}e.exports=l.memo(a)}),null);
__d("useCometUFISubscriptionManager",["JSScheduler","React","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useRef;function a(){var a=h(new Set()),c=h(new Set()),d=h(!1),e=g(function(b){a.current.add(b);d.current&&b.subscribe();return{dispose:function(){b.unsubscribe(),a.current["delete"](b)}}},[]),f=g(function(){d.current||(d.current=!0,a.current.forEach(function(a){var e=b("JSScheduler").scheduleSpeculativeCallback(function(){!d.current?b("recoverableViolation")("Scheduled callback to activate subscription was not canceled","ufi2"):(c.current["delete"](e),a.subscribe())});c.current.add(e)}))},[]),i=g(function(){d.current&&(d.current=!1,a.current.forEach(function(a){return a.unsubscribe()}),c.current.forEach(function(a){return b("JSScheduler").cancelCallback(a)}),c.current.clear())},[]);return[e,f,i]}e.exports=a}),null);
__d("CometUFIRealtimeRoot.react",["React","UFI2RealtimeContext","useCometUFISubscriptionManager"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useEffect;function a(a){var c=a.children;a=a.enabled;var d=a===void 0?!0:a;a=b("useCometUFISubscriptionManager")();var e=a[0],f=a[1],i=a[2];h(function(){if(d){f();return function(){i()}}},[d,f,i]);return g.jsx(b("UFI2RealtimeContext").Provider,{value:e,children:c})}e.exports=a}),null);
__d("CometUFITooltip.react",["CometErrorBoundary.react","CometLazyTooltip.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useState;function a(a){var c=a.children,d=a.delayContentMs;d=d===void 0?0:d;var e=a.delayTooltipMs;e=e===void 0?75:e;var f=a.headline,j=a.tooltipContentComponent;a=a.tooltipContentProps;var k=i(0),l=k[0],m=k[1];k=h(function(a){a&&m(l+1)},[l,m]);d=g.jsx(b("CometLazyTooltip.react"),{align:"middle",delayContentMs:d,delayTooltipMs:e,headline:f,onVisibilityChange:k,tooltipProps:babelHelpers["extends"]({},a,{shownCount:l}),tooltipResource:j,children:c});return g.jsx(b("CometErrorBoundary.react"),{fallback:function(){return c},children:d})}e.exports=a}),null);
__d("CometCompatPrimerDialog.react",["CometLazyDialogTrigger.react","FBLogger","JSResource","React","mergeRefs"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("JSResource")("CometCompatModal.react").__setRef("CometCompatPrimerDialog.react");function a(a,c){var d=a.Component;a=a.props;var e=a.ajaxify,f=a.href,i=a.onClick,j=a.rel,k=babelHelpers.objectWithoutPropertiesLoose(a,["ajaxify","href","onClick","rel"]);e=(e=e)!=null?e:f;if(j==null||e==null){b("FBLogger")("ufi2").mustfix("CometPrimer called with null props for rel or ajaxify, this is an issue only present on Comet and should be investigated");return g.jsx(d,babelHelpers["extends"]({},a))}return g.jsx(b("CometLazyDialogTrigger.react"),{dialogProps:{params:{rel:String(j),uri:String(e)}},dialogResource:h,children:function(a,e){return g.jsx(d,babelHelpers["extends"]({},k,{href:f!=null?"#":void 0,onClick:function(b){i&&i(b),a()},ref:b("mergeRefs")(c,e)}))}})}e.exports=g.forwardRef(a)}),null);
__d("CometVideoHomeFeedUnitUFISummary.react",["requireCond","CometRelay","CometTrackingNodeProvider.react","CometUFICommentsCount.react","CometUFITopReactions.react","React","VideoHomeCometErrorBoundary.react","qex","stylex","cr:1157912","CometVideoHomeFeedUnitUFISummary_feedback.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React"),j=!!b("qex")._("1107866");function a(a){var c=a.onClickCommentsCount;a=h(g!==void 0?g:g=b("CometVideoHomeFeedUnitUFISummary_feedback.graphql"),a.feedback);var d=a.comment_count,e=a.reaction_count;d=(d==null?void 0:d.is_empty)===!1;e=(e==null?void 0:e.is_empty)===!1;if(!d&&!e)return null;e=e&&i.jsxs("div",{className:"stjgntxs ni8dbmo4 bkfpd7mw buofh1pr j83agx80 bp9cbjyn",children:[i.jsx(b("VideoHomeCometErrorBoundary.react"),{fallback:null,moduleClass:"CometVideoHomeFeedUnitUFISummary_CometUFITopReactions",children:i.jsx(b("CometUFITopReactions.react"),{feedback:a})}),i.jsx(b("VideoHomeCometErrorBoundary.react"),{fallback:null,moduleClass:"CometVideoHomeFeedUnitUFISummary_CometUFIReactionsCount",children:i.jsx(b("cr:1157912"),{feedback:a})})]});return j?i.jsx("div",{className:"l9j0dhe7 hpfvmrgz bkfpd7mw g5gj957u buofh1pr j83agx80","data-testid":void 0,children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:22,children:i.jsxs("div",{className:"stjgntxs ni8dbmo4 h7mekvxk bkfpd7mw lhclo0ds j83agx80 m9osqain bp9cbjyn",children:[e,d&&i.jsx("div",{className:"c9rrlmt1 hnxzwevs",children:" \xb7 "}),i.jsx("div",{className:"pfnyh3mw j83agx80 bp9cbjyn",children:d&&i.jsx(b("VideoHomeCometErrorBoundary.react"),{fallback:null,moduleClass:"CometVideoHomeFeedUnitUFISummary_CometUFICommentsCount",children:i.jsx(b("CometUFICommentsCount.react"),{feedback:a,onClick:c,textType:"body4"})})})]})})}):i.jsx("div",{className:"l9j0dhe7","data-testid":void 0,children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:22,children:i.jsxs("div",{className:"stjgntxs ni8dbmo4 h7mekvxk bkfpd7mw lhclo0ds j83agx80 m9osqain bp9cbjyn dhix69tm oygrvhab wkznzc2l kvgmc6g5 s1tcr66n",children:[e,i.jsx("div",{className:"c0wkt4kp pfnyh3mw kb5gq1qc"}),i.jsx("div",{className:"pfnyh3mw j83agx80 bp9cbjyn",children:d&&i.jsx(b("VideoHomeCometErrorBoundary.react"),{fallback:null,moduleClass:"CometVideoHomeFeedUnitUFISummary_CometUFICommentsCount",children:i.jsx("div",{className:"gtad4xkn",children:i.jsx(b("CometUFICommentsCount.react"),{feedback:a,onClick:c})})})})]})})})}e.exports=a}),null);
__d("CometVideoHomeFeedUnitUFISummaryAndActions.react",["requireCond","CometRelay","cr:1153810","cr:1460662","CometVideoHomeFeedUnitUFISummary.react","React","UFI2CommentActionLink.react","UFI2ReactionActionLink.react","cr:1344257","cr:1418056","qex","stylex","CometVideoHomeFeedUnitUFISummaryAndActions_feedback.graphql","CometVideoHomeFeedUnitUFISummaryAndActions_shareable.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i;b("CometRelay").graphql;var j=b("CometRelay").useFragment,k=b("CometRelay").useRelayEnvironment,l=b("React");a=b("React");var m=a.useCallback,n={actionLinks:{alignItems:"bp9cbjyn",color:"oo9gr5id",display:"j83agx80",flexDirection:"btwxx1t3",flexGrow:"buofh1pr",fontSize:"gfeo3gy3",order:"ewlkfwdl"},actionsContainer:{display:"j83agx80",marginTop:"kvgmc6g5",marginEnd:"wkznzc2l",marginBottom:"oygrvhab",marginStart:"dhix69tm",paddingTop:"ipjc6fyt",paddingEnd:"rz4wbd8a",paddingBottom:"iuny7tx3",paddingStart:"a8nywdso"},blueActionLinks:{alignItems:"bp9cbjyn",color:"oo9gr5id",display:"j83agx80",fontSize:"e9vueds3",minWidth:"fer614ym"},blueActionsContainer:{display:"j83agx80",flexGrow:"buofh1pr"},blueContainer:{display:"j83agx80",flexGrow:"buofh1pr",marginTop:"aov4n071",marginEnd:"tvfksri0",marginBottom:"bi6gxh9e",marginStart:"ozuftl9m"},blueShareActionLink:{fontSize:"e9vueds3"},shareActionLinkRoot:{flexBasis:"mg4g778l"}},o=!!b("qex")._("1107866");e.exports=function(a){var c=a.feedback,d=a.feedbackSource,e=a.onActorSelected,f=a.onClickCommentsCount,p=a.onCommentClick;a=a.shareable;var q=k();c=j(g!==void 0?g:g=b("CometVideoHomeFeedUnitUFISummaryAndActions_feedback.graphql"),c);a=j(h!==void 0?h:h=b("CometVideoHomeFeedUnitUFISummaryAndActions_shareable.graphql"),a);var r=c.id,s=c.subscription_target_id,t=m(function(){return r==null||s==null||b("cr:1460662")==null?null:b("cr:1460662").subscribe(q,{feedback_id:r},!1,s)},[q,r,s]);p=l.jsxs(l.Fragment,{children:[c.can_viewer_react===!0&&l.jsx(b("UFI2ReactionActionLink.react"),{enableAnimations:!0,feedback:c,feedbackSource:d,floating:!0,useDefaultActor:!1}),c.can_viewer_comment===!0&&l.jsx(b("UFI2CommentActionLink.react"),{floating:!0,onClick:p}),a!=null?l.jsx(b("cr:1418056"),{buttonXStyle:n.blueShareActionLink,feedback:c,feedbackSource:d,rootXStyle:n.shareActionLinkRoot,shareable:a}):null,c.can_see_voice_switcher===!0&&b("cr:1153810")!=null?l.jsx(b("cr:1153810"),{feedback:c,onActorSelected:e}):null]});d=l.jsxs(l.Fragment,{children:[l.jsx(b("CometVideoHomeFeedUnitUFISummary.react"),{feedback:c,onClickCommentsCount:f}),l.jsx("div",{className:(i||(i=b("stylex")))(n.actionsContainer),children:l.jsx("div",{className:i(n.actionLinks),"data-testid":void 0,children:p})})]});a=l.jsxs("div",{className:i(n.blueContainer),children:[l.jsx("div",{className:i(n.blueActionsContainer),children:l.jsx("div",{className:i(n.blueActionLinks),"data-testid":void 0,children:p})}),l.jsx(b("CometVideoHomeFeedUnitUFISummary.react"),{feedback:c,onClickCommentsCount:f})]});e=o?a:d;b("cr:1344257")!=null&&(e=l.jsx(b("cr:1344257"),{subscribe:t,children:e}));return o?l.jsx("div",{children:e}):e}}),null);
__d("CometVideoHomeFeedUnitUFIImpl.react",["requireCond","CometProgressIndicator.react","CometRefineRef","CometRelay","CometUFICommentListRenderer.react","cr:1344273","CometVideoHomeFeedUnitUFISummaryAndActions.react","React","stylex","CometVideoHomeFeedUnitUFIImpl_feedback.graphql","CometVideoHomeFeedUnitUFIImpl_shareable.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("React");c=b("React");var k=c.useCallback,l=c.useEffect,m=c.useRef;function a(a){var c=a.autoExpandComments,d=c===void 0?!1:c;c=a.feedback;var e=a.focusCommentID,f=a.onActorSelected;a=a.shareable;var n=m();c=i(g!==void 0?g:g=b("CometVideoHomeFeedUnitUFIImpl_feedback.graphql"),c);a=i(h!==void 0?h:h=b("CometVideoHomeFeedUnitUFIImpl_shareable.graphql"),a);var o=c==null?void 0:c.id,p=k(function(){var a=n.current;a!=null&&a.Actions.toggleList({focusComposer:!0})},[]),q=k(function(a){var b=n.current;b!=null&&(b.Actions.expandList({focusComposer:!0,scrollToComposer:!0}),a.type!=="press"&&a.preventDefault())},[]);l(function(){var a=n.current;d&&a!=null&&a.Actions.expandList({focusComposer:!1})},[d]);if(c==null||o==null)return j.jsx("div",{className:"h4z51re5 osnr6wyh rv4hoivh jktsbyx5 taijpn5t j83agx80 bp9cbjyn",children:j.jsx(b("CometProgressIndicator.react"),{})});f=j.jsxs(j.Fragment,{children:[j.jsx(b("CometVideoHomeFeedUnitUFISummaryAndActions.react"),{feedback:c,feedbackSource:60,onActorSelected:f,onClickCommentsCount:p,onCommentClick:q,shareable:(o=a)!=null?o:null}),j.jsx(b("CometUFICommentListRenderer.react"),{displayCommentsContext:{},fallback:null,feedLocation:"VIDEO_HOME_FEED",feedback:c,feedbackSource:60,focusCommentID:e,listRef:b("CometRefineRef")(n),storyRenderLocation:"video_home_feed"})]});return b("cr:1344273")!=null?j.jsx("div",{className:"sq6gx45u buofh1pr cbu4d94t j83agx80",children:j.jsx(b("cr:1344273"),{enabled:c.is_eligible_for_real_time_updates===!0,children:f})}):j.jsx("div",{className:"sq6gx45u buofh1pr cbu4d94t j83agx80",children:f})}e.exports=a}),null);
__d("CometVideoHomeBlueDesignFeedUnitUFI.react",["CometRelay","CometVideoHomeFeedUnitUFIImpl.react","React","VideoHomeCometErrorBoundary.react","CometVideoHomeBlueDesignFeedUnitUFI_story.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React"),j=g!==void 0?g:g=b("CometVideoHomeBlueDesignFeedUnitUFI_story.graphql");function a(a){var c,d=a.autoExpandComments,e=a.focusCommentID;a=a.story;a=h(j,a);c=a==null?void 0:(c=a.feedback_context)==null?void 0:c.feedback_target_with_context;return c==null?null:i.jsx(b("VideoHomeCometErrorBoundary.react"),{fallback:null,moduleClass:"CometVideoHomeBlueDesignFeedUnitUFI",children:i.jsx(b("CometVideoHomeFeedUnitUFIImpl.react"),{autoExpandComments:d,feedback:c,focusCommentID:e,onActorSelected:function(a){},shareable:(d=a.shareable)!=null?d:null})})}e.exports=a}),null);
__d("CometVideoHomeFeedStoryUFIReactionsCount.react",["fbt","CometCompatPrimerDialog.react","CometPressable.react","CometRelay","CometTrackingNodeProvider.react","CometUFIReactionsDialog.entrypoint","CometUFITooltip.react","JSResource","NumberFormat","React","intlList","qex","stylex","unrecoverableViolation","useCometEntryPointDialog","useCometInteractionTracing","CometVideoHomeFeedStoryUFIReactionsCount_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b("CometRelay").graphql;var j=b("CometRelay").useFragment,k=b("React");c=b("React");var l=c.useCallback,m=b("JSResource")("CometUFIReactionsCountTooltipContent.react").__setRef("CometVideoHomeFeedStoryUFIReactionsCount.react"),n=function(a){return k.jsx("span",babelHelpers["extends"]({},a))},o={root:{color:"gmql0nx0",display:"j83agx80",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},sentence:{":hover":{textDecoration:"gpro0wi8"}},sentenceWithSocialContext:{backgroundColor:"cwj9ozl2","float":"bzsjyuwj"},sentenceWrapper:{overflowX:"ni8dbmo4",overflowY:"stjgntxs",textOverflow:"ltmttdrg"},truncatedSentence:{marginStart:"hcukyx3x",overflowX:"ni8dbmo4",overflowY:"stjgntxs",textOverflow:"ltmttdrg",whiteSpace:"g0qnabr5"}};function a(a){a=j(h!==void 0?h:h=b("CometVideoHomeFeedStoryUFIReactionsCount_feedback.graphql"),a.feedback);var c=a.i18n_reaction_count,d=a.id,e=a.important_reactors,f=a.reaction_count,g=a.viewer_actor,q=a.viewer_feedback_reaction_info;a=(a=a.viewer_actor)==null?void 0:a.id;f=f==null?void 0:f.count;if(a==null)throw b("unrecoverableViolation")("CometVideoHomeFeedStoryUFIReactionsCount: expected feedback.viewer_actor.id","ufi2");if(d==null)throw b("unrecoverableViolation")("CometVideoHomeFeedStoryUFIReactionsCount: expected feedback.id","ufi2");if(f==null)throw b("unrecoverableViolation")("CometVideoHomeFeedStoryUFIReactionsCount: Expected a reaction count","ufi2");if(c==null)throw b("unrecoverableViolation")("CometVideoHomeFeedStoryUFIReactionsCount: Expected an i18n_reaction_count","ufi2");a=b("useCometEntryPointDialog")(b("CometUFIReactionsDialog.entrypoint"),{feedbackTargetID:d});var r=a[0];a=a[1];var s=b("useCometInteractionTracing")(30605374,"fluid","INTERACTION"),t=l(function(){s(function(){r({})})},[r,s]);if(f===0)return null;g=g==null?void 0:g.name;e=(e=e==null?void 0:e.nodes)!=null?e:[];q=q!=null;var u=q?e.length+1:e.length;u=u<f;var v=u?b("CometUFITooltip.react"):n;u=u?{tooltipContentComponent:m,tooltipContentProps:{queryVariables:{feedbackTargetID:d},reactionCount:f}}:{};d=((d=b("qex")._("1113951"))!=null?d:!1)&&((d=b("qex")._("1115760"))!=null?d:!1);return k.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:137,children:k.jsx(b("CometPressable.react"),{display:"inline",onPress:t,overlayDisabled:!0,ref:a,suppressHydrationWarning:!0,xstyle:o.root,children:k.jsx("span",{className:(i||(i=b("stylex")))([o.sentence,o.sentenceWithSocialContext,o.truncatedSentence]),"data-testid":void 0,children:k.jsx("span",{className:i(o.sentenceWrapper),children:k.jsx(v,babelHelpers["extends"]({},u,{children:k.jsx(p,{actorName:g,i18nReactionCount:c,importantReactors:e,isPrivateFeedback:d,reactionCount:f,viewerReacted:q})}))})},"social-sentence")})})}function p(a){var c=a.actorName,d=a.i18nReactionCount,e=a.importantReactors,f=a.isPrivateFeedback;f=f===void 0?!1:f;var h=a.reactionCount;a=a.viewerReacted;if(a&&h===1)return c;if(!a&&e.length===0&&!f)return q(d,h);c=[a?g._("You"):null].concat(e.map(function(a){return a==null?void 0:a.name})).filter(Boolean);a=h-c.length;if(f){e=3;f=c.slice(0,e);e=h>f.length;return b("intlList")([].concat(f,[e&&f.length>0&&g._("others")]).filter(Boolean))}a>0&&c.push(g._({"*":"{number} others","_1":"1 other"},[g._plural(a,"number",q(d,a))]));return b("intlList")(c)}function q(a,c){var d=Math.floor(Math.log10(c));return d<3?b("NumberFormat").formatInteger(c):a}e.exports=a}),null);