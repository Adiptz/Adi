if (self.CavalryLogger) { CavalryLogger.start_js(["T4izS"]); }

__d("XMeEndpointController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/me/{*view}/",{view:{type:"String",defaultValue:""}})}),null);
__d("ReactComposerMediaDialog.react",["cx","fbt","Arbiter","DialogExpansion","DOMContainer.react","FBConfirmDialog.react","LayerFadeOnShow","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerHandleUnsavedChanges","SubscriptionsHandler","XMeEndpointController","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","createReactClass_DEPRECATED","goURI","prop-types","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=500,k=500;a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerMediaDialog",_subscriptions:b("SubscriptionsHandler"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composerDOM:b("prop-types").any.isRequired,composerID:b("prop-types").string.isRequired,onDismiss:b("prop-types").func.isRequired},getInitialState:function(){return{shown:!0,showConfirmDialog:!1}},UNSAFE_componentWillMount:function(){this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this.props.composerID,b("throttle")(this._success,k)))},componentWillUnmount:function(){this._subscriptions.release()},render:function(){var a=this.state.showConfirmDialog?this._renderDismissConfirmation():null;return i.jsxs("div",{children:[a,i.jsxs(b("XUIDialog.react"),{behaviors:{DialogExpansion:b("DialogExpansion"),LayerFadeOnShow:b("LayerFadeOnShow")},className:"_51ly",shown:this.state.shown,width:j,layerHideOnBlur:!1,children:[i.jsxs(b("XUIDialogTitle.react"),{showCloseButton:!1,children:[h._("Upload Photos\/Videos"),i.jsx(b("XUICloseButton.react"),{className:"_51-t",label:h._("Close"),onClick:this._showConfirmDialog})]}),i.jsx(b("XUIDialogBody.react"),{className:"_51lz",children:i.jsx(b("DOMContainer.react"),{children:this.props.composerDOM})})]})]})},_renderDismissConfirmation:function(){return i.jsx(b("FBConfirmDialog.react"),{content:b("ReactComposerHandleUnsavedChanges").getUnsavedChangesMessage(this.props.composerID),onCancel:this._cancelDismiss,onConfirm:this._dismiss,onToggle:this._cancelDismiss,shown:!0,title:h._("Discard Changes"),cancelButtonText:h._("No"),confirmButtonText:h._("Discard Changes")})},_showConfirmDialog:function(){this.setState({showConfirmDialog:!0})},_cancelDismiss:function(){this.setState({showConfirmDialog:!1})},_dismiss:function(){this.setState({shown:!1,showConfirmDialog:!1}),this.props.onDismiss&&this.props.onDismiss()},_success:function(){this._dismiss();var a=b("XMeEndpointController").getURIBuilder().setString("view","timeline").getURI();b("goURI")(a)}});e.exports=a}),null);
__d("ReactComposerTimelineStore",["DateConsts","ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerPostUtils","ReactComposerStore"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__onPostStarted=function(a){var c=b("ReactComposerStore").getScheduledPublishTime(a.composerID);if(c){c=Math.round(c/b("DateConsts").MS_PER_SEC);a.config.contextInfo.scheduled=!0;a.config.contextInfo.unpublished_content_type="SCHEDULED";a.config.contextInfo.scheduled_publish_time=c}b("ReactComposerPostUtils").post({actorID:a.actorID,composerConfig:a.config,composerID:a.composerID,onPostFailure:a.onPostFailure,onPostSuccess:a.onPostSuccess,targetID:a.targetID})};d.__canPost=function(a){return!b("ReactComposerPostUtils").isPostButtonDisabled(a.composerID,b("ReactComposerMediaConfig").photo.limit)};d.__cleanup=function(a){};return c}(b("ReactComposerActionStore"));e.exports=new a()}),null);
__d("ReactComposerTimelineMediaPostButtonContainer.react",["ReactComposerContextTypes","ReactComposerMediaPostButtonContainerMixin","ReactComposerTimelineStore","createReactClass_DEPRECATED"],(function(a,b,c,d,e,f){a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerTimelineMediaPostButtonContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerMediaPostButtonContainerMixin")],getDefaultProps:function(){return{useDefaultScheduleComponent:!0}},componentDidMount:function(){b("ReactComposerTimelineStore").registerComposerID(this.context.composerID)}});e.exports=a}),null);
__d("ReactMediaComposer.react",["cx","Arbiter","React","ReactComposer.react","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerEvents","ReactComposerMediaEagerAttachment.react","ReactComposerPrefillConfig","ReactComposerPrefillUtils","ReactComposerStatusEagerAttachment.react","ReactComposerTimelineMediaPostButtonContainer.react","createReactClass_DEPRECATED"],(function(a,b,c,d,e,f,g){var h=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactMediaComposer",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,config:b("ReactComposerConfig").isRequired,prefillConfig:b("ReactComposerPrefillConfig").isRequired},UNSAFE_componentWillMount:function(){b("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,this.props.prefillConfig,this.props.contextConfig.gks)},componentDidMount:function(){var a=this.props.prefillConfig;a&&a.selectedAttachment&&(b("ReactComposerAttachmentActions").selectAttachment(this.props.contextConfig.composerID,a.selectedAttachment,a.shouldActivateSelectedAttachment),a.shouldActivateSelectedAttachment&&b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID))},render:function(){var a=this.props.prefillConfig.selectedAttachment;a=this._getAttachments(a);return h.jsx(b("ReactComposer.react"),{className:"_1nby",loggingConfig:this.props.config.loggingConfig,activateOnInit:!0,activateOnInitEntryPoint:this.props.config.triggeredFrom,children:h.jsxs(b("ReactComposerBodyContainer.react"),{expanded:this.props.config.showExpandedComposer,children:[a,this.props.children]})})},_getAttachments:function(a){var c=[];c.push(h.jsx(b("ReactComposerStatusEagerAttachment.react"),{config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").STATUS,scrapeLinkOnInit:!1},"status"));c.push(h.jsx(b("ReactComposerMediaEagerAttachment.react"),{config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").MEDIA},"media"));return c}});e.exports=a}),null);
__d("ReactMediaComposerInit",["AsyncRequest","Bootloader","CSS","DOM","Event","React","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextConfig","ReactComposerInit","ReactComposerLoggingName","ReactComposerMediaDialog.react","ReactComposerPrefillConfig","ReactDOM","ReactMediaComposer.react","Run","$"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={_composerDOM:null,_mountContainer:null,init:function(a){var c=this;this._composerDOM=b("DOM").create("div");this._mountContainer=b("DOM").create("div");var d=b("$")("timeline-medley"),e=a.contextConfig.composerID;d=b("DOM").scry(d,'input[name="composer_photo[]"]')[0];var f=b("ReactComposerAttachmentType").STATUS;d&&(this._inputDOM=d,b("Event").listen(this._inputDOM,"change",function(){c._inputDOM.files&&c._inputDOM.files.length>0&&(c._uploadExistingFiles(c._inputDOM.files,e,a),b("ReactComposerAttachmentActions").selectAttachment(e,b("ReactComposerAttachmentType").MEDIA,!0,b("ReactComposerLoggingName").MEDIA_COMPOSER_ON_INIT))}),d.files&&d.files.length>0&&(f=b("ReactComposerAttachmentType").MEDIA,this._uploadExistingFiles(d.files,e,a)));a.prefillConfig={selectedAttachment:f,shouldActivateSelectedAttachment:!0};b("ReactComposerInit").init(b("ReactMediaComposer.react"),a,this._composerDOM);b("ReactDOM").render(g.jsx(b("ReactComposerMediaDialog.react"),{composerDOM:this._composerDOM,composerID:e,onDismiss:this._cleanup.bind(this)}),this._mountContainer);b("DOM").appendContent(document.body,this._mountContainer);b("Run").onUnload(this._cleanup.bind(this));b("Run").onLeave(this._cleanup.bind(this))},_cleanup:function(){var a=this;setTimeout(function(){a._composerDOM&&b("ReactDOM").unmountComponentAtNode(a._composerDOM),a._mountContainer&&b("ReactDOM").unmountComponentAtNode(a._mountContainer)},0)},_uploadExistingFiles:function(a,c,d){var e=d.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];b("Bootloader").loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(b,f){return b.uploadPhotosOrVideo(c,Array.prototype.slice.call(a),new f(d.contextConfig,e.photoLimit,{disableFaceRecognition:e.disableFaceboxTagger}),d.config.targetData.targetSupportsMultiplePhotos,"file_selector",d.config.targetData.targetSupportsMultiMedia,e)},"ReactMediaComposerInit")},setupFileUploadToComposerDialog:function(a,c,d){var e=function(c){b("CSS").conditionClass(a.getControl(),d,c),a.getInput().disabled=c};a.subscribe("change",function(){new(b("AsyncRequest"))().setURI(c).setErrorHandler(function(){a.clear(),e(!1)}).setHandler(function(){e(!1)}).send(),e(!0)})}};e.exports=a}),null);