if (self.CavalryLogger) { CavalryLogger.start_js(["rFIZh"]); }

__d("CurationCaretNux",["csx","cx","Arbiter","AsyncRequest","CSS","DataStore","DOM","Event","NavigationMessage","Parent","Rect","ge","tidyEvent"],(function(a,b,c,d,e,f,g,h){var i="div._1zpr",j="div._6ks",k="._3x-2 img.img",l="span.text_exposed_link",m="_5jmm",n="CurationCaretNux_instance",o="CurationCaretNux_caretMenuLoaded",p=100,q="LINK_WELCOME",r="VIDEO_WELCOME",s="POST_SAVE_WELCOME",t="PHOTO_WELCOME",u="caret_nux",v="save_option_nux",w="seen",x="dismissed",y="focus",z="click",A="scroll",B=!1,C=null,D=null;a=function(){"use strict";function a(a,c,d,e,f,g){e=b("ge")(e);if(e){this.container=e;this.caret=d;this.caretNux=a.instance;this.caretNuxData=a;this.saveOptionNux=c.instance;this.saveOptionNuxData=c;this.allowAutoplayNux=g;this.popoverTriggered=!1;d=b("Parent").byClass(e,m);b("DataStore").set(d,n,this);switch(f){case q:this.$1();break;case r:this.$1();this.$2();this.$3();break;case s:this.$4();break;case t:this.$5();break}b("Arbiter").subscribeOnce(b("NavigationMessage").NAVIGATION_BEGIN,function(){this.caretNux&&this.caretNux.hide(),this.saveOptionNux&&this.saveOptionNux.hide()}.bind(this))}}var c=a.prototype;c.$1=function(){var a=b("DOM").scry(this.container,i);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){if(B||this.videoPlaying)return;this.caretNux.subscribe("show",function(){this.$6()}.bind(this));this.caretNux.subscribe("hide",function(){this.$7(),B&&(this.$8(u,w),this.$8(u,x))}.bind(this));this.$9();this.interactionTime=0;window.setTimeout(function(){this.$10()||(B=!0,this.caretNux.show())}.bind(this),this.caretNuxData.min_consume_duration);window.setTimeout(function(){this.$10()||(B=!1,this.caretNux.hide())}.bind(this),this.caretNuxData.max_consume_duration);var a=Date.now();window.setTimeout(function(){this.$11(function(){this.interactionTime||(this.interactionTime=Date.now()-a)}.bind(this))}.bind(this),0)}.bind(this))])};c.$2=function(){var a=b("DOM").scry(this.container,j);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){this.videoPlaying=!0}.bind(this))])};c.$3=function(){if(!this.allowAutoplayNux)return;D===null&&(D=this.caretNuxData.min_consume_duration);C===null&&!B&&(C=b("Arbiter").subscribe("flash/updateStatus",function(a,c){if(!B&&D!==null&&c.position*1e3>D){a=b("Parent").byClass(b("ge")(c.divID),m);c=b("DataStore").get(a,n);c&&(B=!0,c.caretNux.show(),c.$6(),b("Arbiter").unsubscribe(C))}}))};c.$4=function(){var a=b("DOM").scry(this.container,l);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){if(B)return;B=!0;this.caretNux.show();this.$6()}.bind(this))])};c.$5=function(){var a=b("DOM").scry(this.container,k);a.forEach(function(a){a=b("Parent").byTag(a,"a");if(!a)return;b("Event").listen(a,"click",function(){if(B)return;var a=b("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){var c=Date.now(),d=b("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){var a=Date.now()-c;a>this.caretNuxData.min_consume_duration&&a<this.caretNuxData.max_consume_duration&&(B=!0,this.caretNux.show(),this.$6());b("Arbiter").unsubscribe(d)}.bind(this));b("Arbiter").unsubscribe(a)}.bind(this))}.bind(this))},this)};c.$10=function(){return this.interactionTime&&this.interactionTime>0};c.$6=function(){this.caretClickListener=b("Event").listen(this.caret,"click",function(){this.caretNux.hide(),this.saveOptionNux&&(this.popoverTriggered=!0,this.$12())}.bind(this));var a=!1,c=function(c){if(a||c===z||!this.caretNux.isShown())return;c=b("Rect").getViewportWithoutScrollbarsBounds();var d=b("Rect").getElementBounds(this.caretNux.getContentRoot());d=d.sub(0,p);c.contains(d)&&(this.$8(u,w),a=!0)}.bind(this);c();this.$9();this.$11(c)};c.$7=function(){this.caretClickListener.remove(),this.$13()};c.$12=function(){this.$14()&&this.popoverTriggered&&window.setTimeout(function(){var a=b("DOM").scry(document,"li.save_caret_menu_item");for(var c=0;c<a.length;c++){var d=a[c],e=b("Parent").byClass(d,"uiLayer");if(e&&b("CSS").shown(e)){this.saveOptionNux.setContext(d);break}}this.saveOptionNux.show();this.$8(v,w);e=b("DataStore").get(this.caret,"Popover");e&&e.subscribeOnce("hide",function(){this.saveOptionNux.hide()}.bind(this))}.bind(this),0)};c.$8=function(a,c){var d;if(a===u)d=this.caretNuxData;else if(a===v)d=this.saveOptionNuxData;else throw new Error("Invalid nux type");var e;if(c===w)e=d.seen_uri,d.seen_uri=null;else if(c===x)e=d.dismiss_uri,d.dismiss_uri=null;else throw new Error("Invalid impression type");if(e){c=new(b("AsyncRequest"))(e);this.interactionTime&&a===u&&c.setData({interaction_time:this.interactionTime});c.send()}};c.$11=function(a){this.$15.push(a)};c.$16=function(a){this.$15.forEach(function(b){b.call(this,a)},this)};c.$9=function(){this.$17||(this.$15=[],this.$17=[b("Event").listen(window,"click",this.$16.bind(this,z)),b("Event").listen(window,"focus",this.$16.bind(this,y)),b("Event").listen(window,"scroll",this.$16.bind(this,A))])};c.$13=function(a){if(this.$17){while(this.$17.length)this.$17.pop().remove();this.$17=null;this.$15=null}};c.$14=function(){var a=b("Parent").byClass(this.container,m);return b("DataStore").get(a,o)===!0};a.saveOptionLoaded=function(a){a=b("ge")(a);if(a){a=b("Parent").byClass(a,m);if(a){b("DataStore").set(a,o,!0);a=b("DataStore").get(a,n);a&&a.$12()}}};return a}();e.exports=a}),null);
__d("XSavedForLaterNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/saved/nuxseen/",{action:{type:"Enum",enumType:1},surface:{type:"Enum",enumType:1},mechanism:{type:"Enum",enumType:1},collection_id:{type:"Enum",enumType:0},object_id:{type:"Int"},interaction_time:{type:"Int"}})}),null);
__d("OnlyMeSharerSaveNux.react",["cx","fbt","AsyncRequest","Banzai","ContextualLayerBlind","CSS","DataStore","DOM","DOMScroll","Keys","Link.react","Parent","React","URI","XSavedForLaterNUXSeenController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUIDialogButton.react","guid","nullthrows","prop-types"],(function(a,b,c,d,e,f,g,h){var i,j=b("React"),k=null,l=null,m="OnlyMeSharerSaveNux_instance",n="OnlyMeSharerSaveNux_caretMenuLoaded",o="_5jmm",p="_54ne",q="impression",r="saved_for_later:click",s="only_me_sharer_nux",t="learn_more_link",u="only_me_sharer_nux",v="caret",w="dismiss_button",x="esc_button",y={paddingTop:0,paddingRight:0,paddingBottom:5,paddingLeft:7};a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isShown:!0},d.$1=function(a){a=document.getElementById(d.props.storyContainerId);if(!a)return;var c=b("Parent").byClass(a,o);c&&b("DataStore").get(c,n)===!0&&window.setTimeout(function(){var a=b("DOM").scry(document,"li.save_caret_menu_item"),d=function(d){var e=a[d];d=b("Parent").byClass(e,"uiLayer");if(d&&b("CSS").shown(d)){b("CSS").addClass(e,p);d=b("DataStore").get(c,m);d.$4(v);d=b("DataStore").get(l,"Popover");d&&d.subscribeOnce("hide",function(){b("CSS").removeClass(e,p)});return"break"}};for(var e=0;e<a.length;e++){var f=d(e);if(f==="break")break}},0)},d.$5=function(a){a.keyCode===b("Keys").ESC&&d.state.isShown&&(document.removeEventListener("keyup",d.$5),d.$4(x))},d.$6=function(){d.$4(w)},d.$7=function(){b("Banzai").post(r,{og_object_id:d.props.objectId,collection_id:d.props.collectionId,surface:s,mechanism:t,event_id:b("guid")()},{retry:!0,delay:0})},d.$8=function(a){l!==null&&!a&&l.removeEventListener("click",d.$1);if(d.props.wrapper!=null){a=b("Parent").byClass(d.props.wrapper,"uiLayer");a&&b("CSS").hide(a)}},c)||babelHelpers.assertThisInitialized(d)}c.saveOptionLoaded=function(a){a=document.getElementById(a);if(a!=null){a=b("Parent").byClass(a,o);if(a){b("DataStore").set(a,n,!0);a=b("DataStore").get(a,m);a&&a.state.isShown&&a.$1()}}};var d=c.prototype;d.$2=function(a){var c=function(c){babelHelpers.inheritsLoose(b,c);function b(b){return c.call(this,b,a)||this}return b}(b("ContextualLayerBlind"));return c};d.$3=function(){if(this.props.shareType==="self"||this.props.shareType==="own")return h._("Share successful");else return h._("Message sent")};d.$4=function(a){this.setState({isShown:!1}),b("Banzai").post(r,{og_object_id:this.props.objectId,collection_id:this.props.collectionId,surface:s,mechanism:a,event_id:b("guid")()},{retry:!0,delay:0})};d.UNSAFE_componentWillMount=function(){k=this.$2(babelHelpers["extends"]({},y)),l=document.getElementById(this.props.caretId)};d.componentDidMount=function(){var a=document.getElementById(this.props.storyContainerId);if(a){a=b("Parent").byClass(a,o);a&&b("DataStore").set(a,m,this)}l&&l.addEventListener("click",this.$1);document.addEventListener("keyup",this.$5);window.setTimeout(function(){b("DOMScroll").ensureVisible(b("nullthrows")(l))},500);a=b("XSavedForLaterNUXSeenController").getURIBuilder().setEnum("surface","story").setEnum("mechanism",u).setEnum("collection_id",this.props.collectionId).setInt("object_id",this.props.objectId).setEnum("action",q).getURI();a=new(b("AsyncRequest"))(a);a.send()};d.render=function(){return j.jsxs(b("XUIContextualDialog.react"),{alignment:"right",behaviors:{grayedOutLayer:k},contextRef:function(){return l},offsetX:-3,onToggle:this.$8,position:"below",shown:this.state.isShown,width:400,children:[j.jsx(b("XUIContextualDialogTitle.react"),{children:this.$3()}),j.jsx(b("XUIContextualDialogBody.react"),{children:h._("Want a faster way to save posts privately? Open this dropdown menu and click Save.")}),j.jsxs(b("XUIContextualDialogFooter.react"),{children:[j.jsx(b("Link.react"),{className:"_222f",href:new(i||(i=b("URI")))("/help/516581611792218"),onClick:this.$7,target:"_blank",children:h._("Learn More")}),j.jsx(b("XUIDialogButton.react"),{action:"cancel",label:h._("Got it"),onClick:this.$6,use:"confirm"})]})]})};return c}(j.Component);a.propTypes={caretId:(c=b("prop-types")).string.isRequired,storyContainerId:c.string.isRequired,wrapper:c.any,collectionId:c.string.isRequired,objectId:c.string,shareType:c.string.isRequired};e.exports=a}),null);
__d("SavedForLaterChromeExtensionToastNux",["AsyncRequest","Banzai","DataStore","Event","XSavedForLaterNUXSeenController","guid","tidyEvent"],(function(a,b,c,d,e,f){var g="saved_for_later:click",h="impression",i="story",j="chrome_extension_toast_nux",k="SavedForLaterChromeExtensionToastNux",l="chrome_extension_install_link";a=function(){"use strict";function a(a,c){b("DataStore").set(a,k,this),b("tidyEvent")(b("Event").listen(c,"click",function(a){b("Banzai").post(g,{surface:i,mechanism:l,event_id:b("guid")()},{delay:0})}))}a.onDisplay=function(a){a=b("DataStore").get(a,k);if(!a)return;new(b("AsyncRequest"))(b("XSavedForLaterNUXSeenController").getURIBuilder().setEnum("action",h).setEnum("surface",i).setEnum("mechanism",j).setEnum("collection_id",98).getURI()).setMethod("POST").send()};return a}();e.exports=a}),null);
__d("XSaveAddToCollectionDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/save/list/add_dialog/",{save_context:{type:"String"},story_dom_id:{type:"String"},save_uri:{type:"String"}})}),null);
__d("SaveCaretMenuItem",["csx","cx","AdsTransparencyReportAdTypedLogger","AsyncRequest","Banzai","CSS","DOM","DOMQuery","EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","MenuItem","SavedForLaterChromeExtensionToastNux","SaveState","SaveStateHandler","XSaveAddToCollectionDialogController","ge","gkx"],(function(a,b,c,d,e,f,g,h){var i="saved_for_later:caret_action",j="imp",k="._22la";a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d._data=d._updateData();d.getRoot();b("Event").listen(d._anchor,"error",d.handleError.bind(babelHelpers.assertThisInitialized(d)));b("SaveStateHandler").listen(c.primarysaveid,function(a){this._data=this._updateData(),this._doRender(a)}.bind(babelHelpers.assertThisInitialized(d)));return d}var d=c.prototype;d.handleClick=function(){var c=this,d=a.prototype.handleClick.call(this),e=babelHelpers["extends"]({},this._data);if(this._data.isSaveAction){var f=b("gkx")("974284"),g=b("XSaveAddToCollectionDialogController").getURIBuilder().setString("story_dom_id",this._data.storydomid).setString("save_context",this._data.savecontexttoken);f&&(g=g.setString("save_uri",this._data.saveajaxify));new(b("AsyncRequest"))().setURI(g.getURI()).setHandler(function(a){a=a.getPayload();a&&!a.dialogShown&&(f&&new(b("AsyncRequest"))().setURI(c._data.saveajaxify).send(),c.showTombstone())}).setErrorHandler(function(a){f&&new(b("AsyncRequest"))().setURI(c._data.saveajaxify).send(),c.showTombstone()}).send()}else{b("SaveStateHandler").unsaving(this._data.allsaveids);if(this._data.storydomid!=null){g=b("EntstreamFeedObject").getRoot(b("ge")(this._data.storydomid));var h=b("EntstreamFeedObjectFollowup").getFollowup(g);h&&b("EntstreamFeedObjectFollowup").removeFollowup(g)}}e.logdata.ad_impression&&new(b("AdsTransparencyReportAdTypedLogger"))().setAdID(e.logdata.ad_id).setEvent(e.logdata.event).setEntity(e.logdata.report_entity).setProductLocation(e.logdata.report_location).setSessionID(e.logdata.impression_session_id).setAdsPageType(e.logdata.ads_page_type).log();return d};d.handleError=function(){this._data.isSaveAction?b("SaveStateHandler").saved(this._data.allsaveids):b("SaveStateHandler").unsaved(this._data.allsaveids)};d._updateData=function(){var a=babelHelpers["extends"]({},this._data);a.isSaveAction=b("SaveStateHandler").isSaveAction(a.primarysaveid);a.isSaveAction?(a.markup=a.savemarkup,b("gkx")("974284")?a.ajaxify="#":a.ajaxify=a.saveajaxify,a.title=a.savetitle):(a.markup=a.unsavemarkup,a.ajaxify=a.unsaveajaxify,a.title=a.unsavetitle);return a};d._doRender=function(a){if(!this._root)return;switch(a){case b("SaveState").SAVING:case b("SaveState").UNSAVING:b("CSS").addClass(this._root,"_5arm");window.setTimeout(this.disable.bind(this),10);break;case b("SaveState").SAVED:case b("SaveState").UNSAVED:b("CSS").removeClass(this._root,"_5arm");window.setTimeout(this.enable.bind(this),10);break}b("DOM").replace(this._anchor,this._renderItemContent());b("Event").listen(this._anchor,"error",this.handleError.bind(this))};d.onShow=function(){var a=this._data.logdata;b("Banzai").post(i,{action:j,surface:a.surface,story_id:a.story_id,is_save:this._data.isSaveAction})};d.showTombstone=function(){b("SaveStateHandler").saving(this._data.allsaveids);if(this._data.storydomid==null)return;var a=this._data.savefollowupmarkup;this._data.chromeextensionnuxmarkup.hasChildNodes()&&(a=this._data.chromeextensionnuxmarkup,b("SavedForLaterChromeExtensionToastNux").onDisplay(a));var c=b("EntstreamFeedObject").getRoot(b("ge")(this._data.storydomid));if(c){var d=b("DOM").scry(c,"._5va1");if(d&&d.length>0){d=d[0];d&&(c=d)}b("EntstreamFeedObjectFollowup").addFollowup(c,a,["_521o","_4-u3","_3yll"]);d=b("DOMQuery").scry(c,k);if(d.length>0){a=new CustomEvent("savedShow");d[0].dispatchEvent(a)}}};return c}(b("MenuItem"));e.exports=a}),null);
__d("UFIReactionsStandalone.react",["React","UFIDispatcher","UFIDispatcherContext.react","UFIFeedbackContext.react","UFIReactionsLinkImpl.react","UFIReactionStore"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=new(b("UFIDispatcher"))(),this.$2={UFIReactionStore:new(b("UFIReactionStore"))(this.$1)}};d.componentWillUnmount=function(){this.$2={},this.$1=null};d.render=function(){return this.$1?g.jsx(b("UFIDispatcherContext.react"),{dispatcher:this.$1,stores:this.$2,children:g.jsx(b("UFIFeedbackContext.react"),{contextArgs:this.props.contextArgs,render:function(a,c){return g.jsx(b("UFIReactionsLinkImpl.react"),{contextArgs:a,nuxConfig:a.reactionsNuxConfig,reaction:c.viewerreaction,supportedReactions:c.supportedreactions,ftIdentifier:a.ftentidentifier})}})}):null};return c}(g.Component);e.exports=a}),null);
__d("TahoeCommentComposer",["csx","Arbiter","DOM","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a={init:function(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Arbiter").subscribe("TahoeView/selectCommentTab",function(){var c=b("DOM").scry(a.commentComposer,"._7ra0 ._65td"),d=b("DOM").scry(a.commentComposer,"._7ra0 ._5rpu");(d==null?void 0:d[0])?d[0].focus():(c==null?void 0:c[0])&&c[0].focus()}));b("Run").onLeave(function(){c.release()})}};e.exports=a}),null);
__d("TahoeComments",["csx","Arbiter","DOMQuery","SubscriptionsHandler","TahoeActions","UFILiveVideoAutoscrollHandler","UFIOrderingModeStore","UFISharedDispatcher","Visibility"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){var c=this;this.$1=new(b("UFILiveVideoAutoscrollHandler"))();this.$4=a.ufi;this.$6={instanceid:a.instanceID,ftentidentifier:a.feedbackTargetID};this.$3=!1;this.$5=new(b("SubscriptionsHandler"))();this.$5.addSubscriptions(b("Arbiter").subscribe("ufi/commentChanged",function(b,d){d.ftentidentifier===a.feedbackTargetID&&c.$7()}),b("Arbiter").subscribe("TahoeView/selectCommentTab",function(){b("UFIOrderingModeStore").isLiveStreaming(c.$6.instanceid)&&c.$8()}),b("Visibility").addListener(b("Visibility").VISIBLE,function(){c.$8()}));b("UFISharedDispatcher").register(function(a){(a.type==="story_change_order_mode"||a.type==="story_show_facecast_replies"||a.type==="story_hide_facecast_replies")&&c.$8()});this.$8();b("TahoeActions").setUFIInstanceID(a.instanceID)}var c=a.prototype;c.$7=function(){var a=this;if(!this.$2){var c=b("DOMQuery").scry(this.$4,"._j6a");this.$2=c?c[0]:null}this.$2&&this.$1.manageScroll(this.$2,this.$6,!this.$3,function(){a.$3=!0})};c.$8=function(){this.$3=!1,this.$2=null,this.$7()};return a}();e.exports=a}),null);
__d("TahoeShareButton.react",["React","UFIShareNowMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.endpoint;a=a.endpointData;return g.jsx(b("UFIShareNowMenuBootloader.react"),{endpoint:c,endpointData:a,openOnInitOverride:!1})};return c}(g.Component);e.exports=a}),null);